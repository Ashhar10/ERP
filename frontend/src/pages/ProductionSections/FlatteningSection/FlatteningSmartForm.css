/* ========================================================
   FlatteningSmartForm.css - 100% FINAL VERSION
   COMPLETELY FIXED - READY TO USE
   ======================================================== */

/* BASE */
.modal-overlay {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0.85); display: flex; justify-content: center;
  align-items: center; z-index: 1000; padding: 20px; backdrop-filter: blur(5px);
}
.modal-container {
  background: #1a1a1a; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  max-width: 1600px; width: 95%; max-height: 95vh; overflow: hidden;
  border: 1px solid #333; animation: modalSlideIn 0.3s ease-out;
}
@keyframes modalSlideIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
.enhanced-form { max-width: 1600px !important; height: 90vh !important; }

/* HEADER */
.modal-header { padding: 20px 30px; background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%); border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
.header-left { display: flex; align-items: center; gap: 12px; }
.header-icon { background: linear-gradient(135deg, #00a8ff 0%, #0097e6 100%); width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; box-shadow: 0 4px 12px rgba(0,168,255,0.3); }
.header-text h1 { color: #ffffff; font-size: 20px; font-weight: 600; margin: 0 0 4px 0; }
.header-subtitle { color: #aaaaaa; font-size: 12px; margin: 0; display: flex; align-items: center; gap: 6px; }
.header-subtitle svg { color: #00a8ff; }
.header-actions { display: flex; align-items: center; gap: 10px; }
.draft-saved-badge { background: rgba(0,255,136,0.15); color: #00ff88; padding: 4px 10px; border-radius: 16px; font-size: 11px; font-weight: 500; display: flex; align-items: center; gap: 4px; border: 1px solid rgba(0,255,136,0.3); animation: pulse 2s infinite; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.7; } }

/* MACHINE NAV */
.machine-nav-container { display: flex; align-items: center; gap: 6px; margin-right: 12px; background: #2a2a2a; padding: 4px 8px; border-radius: 6px; border: 1px solid #333; }
.btn-nav-header { background: #333; border: 1px solid #3a3a3a; color: #ffffff; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; padding: 0; }
.btn-nav-header:hover:not(:disabled) { background: #00a8ff; border-color: #00a8ff; transform: scale(1.05); }
.btn-nav-header:disabled { opacity: 0.3; cursor: not-allowed; background: #2a2a2a; }
.machine-header-display { display: flex; flex-direction: column; align-items: center; gap: 1px; min-width: 80px; padding: 0 6px; }
.machine-header-number { color: #ffffff; font-size: 12px; font-weight: 600; white-space: nowrap; }
.machine-header-counter { color: #aaaaaa; font-size: 10px; white-space: nowrap; }

/* ALERTS */
.alert { padding: 10px 16px; border-radius: 8px; margin: 0 20px 12px 20px; display: flex; align-items: center; gap: 8px; font-weight: 500; border: 1px solid transparent; font-size: 12px; }
.alert-success { background: rgba(0,255,136,0.1); color: #00ff88; border-color: rgba(0,255,136,0.2); }
.alert-error { background: rgba(255,68,68,0.1); color: #ff6b6b; border-color: rgba(255,68,68,0.2); }
.alert svg { font-size: 14px; }

/* FORM LAYOUT */
.form-layout { display: flex; height: calc(100% - 80px); gap: 0; }
.form-sidebar { width: 280px; min-width: 250px; background: #2a2a2a; border-right: 1px solid #333; padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
.sidebar-header { display: flex; align-items: center; gap: 10px; padding-bottom: 12px; border-bottom: 1px solid #333; }
.sidebar-header h3 { color: #ffffff; font-size: 16px; font-weight: 600; margin: 0; }
.sidebar-header svg { color: #00a8ff; font-size: 16px; }

/* SHIFT OPTIONS */
.shift-options { display: flex; flex-direction: column; gap: 10px; }
.shift-option { background: #333; border: 1px solid transparent; border-radius: 10px; padding: 12px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }
.shift-option:hover { background: #3a3a3a; transform: translateY(-1px); }
.shift-option.active { background: rgba(0,168,255,0.15); border-color: #00a8ff; box-shadow: 0 0 12px rgba(0,168,255,0.2); }
.shift-option.active::before { content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 100%; background: #00a8ff; }
.option-content { display: flex; flex-direction: column; gap: 2px; }
.option-code { color: #ffffff; font-size: 14px; font-weight: 600; }
.option-name { color: #cccccc; font-size: 12px; }
.option-time { color: #888888; font-size: 10px; }
.option-status { margin-top: 6px; text-align: right; }
.status-active { background: rgba(0,255,136,0.15); color: #00ff88; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: 500; border: 1px solid rgba(0,255,136,0.3); }
.status-inactive { background: rgba(136,136,136,0.15); color: #888888; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: 500; border: 1px solid rgba(136,136,136,0.3); }

/* BULK */
.bulk-operations { background: #333; border-radius: 10px; padding: 12px; border: 1px solid #3a3a3a; }
.bulk-header { display: flex; align-items: center; gap: 8px; margin-bottom: 12px; }
.bulk-header h4 { color: #ffffff; font-size: 14px; margin: 0; }
.bulk-header svg { color: #00a8ff; }
.bulk-controls { display: flex; flex-direction: column; gap: 10px; }

/* SIDEBAR STATS */
.sidebar-stats { background: #333; border-radius: 10px; padding: 12px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; border: 1px solid #3a3a3a; }
.stat-item { display: flex; flex-direction: column; align-items: center; padding: 10px; background: #2a2a2a; border-radius: 8px; }
.stat-label { color: #aaaaaa; font-size: 10px; text-align: center; }
.stat-value { color: #ffffff; font-size: 14px; font-weight: 600; margin-top: 2px; }

/* MAIN CONTENT */
.form-main-content { flex: 1; display: flex; flex-direction: column; gap: 16px; overflow-y: auto; padding: 20px; background: #1a1a1a; }
.shift-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 12px; border-bottom: 1px solid #333; }
.shift-title { display: flex; align-items: center; gap: 12px; }
.shift-title h2 { color: #ffffff; font-size: 18px; margin: 0; font-weight: 600; }
.shift-badge { background: rgba(0,168,255,0.15); color: #00a8ff; padding: 4px 10px; border-radius: 16px; font-size: 11px; font-weight: 500; border: 1px solid rgba(0,168,255,0.3); }

/* TOTALS LINE */
.totals-line { background: #2a2a2a; border-radius: 6px; padding: 8px 12px; margin-bottom: 12px; border: 1px solid #333; font-size: 11px; }
.totals-container { display: flex; align-items: center; gap: 16px; }
.total-item { display: flex; align-items: center; gap: 6px; padding: 4px 8px; background: #333; border-radius: 4px; flex: 1; justify-content: center; }
.total-label { color: #aaaaaa; font-size: 11px; font-weight: 500; }
.total-value { color: #ffffff; font-size: 11px; font-weight: 600; }
.total-separator { color: #444; font-size: 10px; padding: 0 4px; }
.total-efficiency-display { display: flex; align-items: center; gap: 4px; }
.total-efficiency-value { font-size: 11px; font-weight: 600; }
.total-efficiency-icon { font-size: 10px; }

/* PRODUCTION ENTRY */
.production-entry { display: flex; flex-direction: column; gap: 16px; }
.machine-card { background: #2a2a2a; border: 1px solid #333; border-radius: 8px; padding: 12px; transition: all 0.3s ease; }
.machine-card.active { border-color: #00a8ff; box-shadow: 0 2px 8px rgba(0,168,255,0.2); }
.machine-card.collapsed { max-height: 70px; overflow: hidden; cursor: pointer; padding: 8px 12px; }
.machine-card.collapsed:hover { border-color: #3a3a3a; }

/* MACHINE HEADER COMPACT */
.machine-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #333; }
.machine-info { display: flex; align-items: center; gap: 10px; }
.machine-icon { color: #00a8ff; font-size: 20px; background: rgba(0,168,255,0.1); padding: 6px; border-radius: 6px; }
.machine-info h3 { color: #ffffff; font-size: 14px; margin: 0 0 4px 0; font-weight: 600; }
.machine-meta { display: flex; gap: 8px; flex-wrap: wrap; }
.meta-item { color: #aaaaaa; font-size: 10px; display: flex; align-items: center; gap: 4px; }

/* TARGET COLORS */
.target-met { background: rgba(0,255,136,0.1); color: #00ff88; border: 1px solid rgba(0,255,136,0.2); padding: 2px 6px; border-radius: 4px; font-size: 9px; }
.target-missed { background: rgba(255,68,68,0.1); color: #ff4444; border: 1px solid rgba(255,68,68,0.2); padding: 2px 6px; border-radius: 4px; font-size: 9px; }

/* MACHINE STATS COMPACT - PRODUCTION & EFFICIENCY INLINE */
.machine-stats-compact { display: flex; align-items: center; gap: 12px; min-width: 180px; }
.machine-stat-item { display: flex; align-items: center; gap: 6px; }
.stat-label-compact { color: #aaaaaa; font-size: 10px; font-weight: 500; }
.stat-value-compact { color: #ffffff; font-size: 11px; font-weight: 600; }
.efficiency-box-compact { display: inline-flex; align-items: center; gap: 4px; padding: 3px 8px; border-radius: 4px; border: 1px solid; font-size: 10px; font-weight: 600; }

/* TABLE */
.items-table-wrapper { margin-bottom: 12px; }
.items-table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 11px; }
.items-table th { color: #cccccc; font-weight: 500; padding: 6px 4px; text-align: left; font-size: 11px; border-bottom: 1px solid #3a3a3a; background: #333; }
.items-table td { padding: 6px 4px; border-bottom: 1px solid #333; vertical-align: top; }

/* COLUMN WIDTHS */
.col-add { width: 50px; }
.col-item { width: 25%; }
.col-coil-material { width: 25%; }
.col-qty-eff { width: 20%; }
.col-actions { width: 40px; }

/* ADD BUTTON */
.cell-add { padding: 6px 2px; vertical-align: middle; }
.btn-add-inline { background: #333; border: 1px solid #3a3a3a; color: #ffffff; padding: 3px 6px; border-radius: 4px; font-size: 9px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 3px; width: 100%; justify-content: center; height: 22px; }
.btn-add-inline:hover { background: #00a8ff; border-color: #00a8ff; }

/* ITEM CELL */
.item-code-select { margin-bottom: 4px; }
.item-name-line { color: #aaaaaa; font-size: 10px; padding: 1px 0; }

/* COIL & MATERIAL - NO BOX */
.coil-size-input, .material-type-input { margin: 2px 0; }
.coil-size-input input, .material-type-input input { background: transparent; border: none; border-bottom: 1px solid #444; border-radius: 0; padding: 3px 0; color: #cccccc; font-size: 11px; width: 100%; }
.coil-size-input input:focus, .material-type-input input:focus { outline: none; border-bottom-color: #00a8ff; }

/* QUANTITY & EFFICIENCY */
.quantity-input { margin-bottom: 4px; }
.item-efficiency-display { display: flex; align-items: center; gap: 4px; margin-top: 4px; }
.item-efficiency-value { font-size: 10px; font-weight: 600; }
.item-efficiency-icon { font-size: 9px; }

/* OPERATOR & REMARKS INLINE */
.operator-remarks-line { display: flex; gap: 12px; padding: 10px; background: #2a2a2a; border-radius: 6px; margin-top: 10px; border: 1px solid #333; }
.form-group-inline { display: flex; align-items: center; gap: 6px; flex: 1; }
.form-label-inline { color: #cccccc; font-size: 11px; font-weight: 500; white-space: nowrap; }
.form-input-inline { flex: 1; padding: 5px 8px; background: #1a1a1a; border: 1px solid #333; border-radius: 4px; color: #ffffff; font-size: 11px; }
.form-input-inline:focus { outline: none; border-color: #00a8ff; }

/* FORM ELEMENTS */
.form-select, .form-input { width: 100%; padding: 5px 8px; background: #1a1a1a; border: 1px solid #333; border-radius: 4px; color: #ffffff; font-size: 11px; transition: all 0.3s ease; }
.form-select:focus, .form-input:focus { outline: none; border-color: #00a8ff; }
.form-select option { background: #2a2a2a; color: #ffffff; padding: 8px; }

/* BUTTONS */
.btn { padding: 6px 12px; border-radius: 6px; font-weight: 500; font-size: 11px; cursor: pointer; transition: all 0.3s ease; border: none; display: inline-flex; align-items: center; justify-content: center; gap: 5px; color: #ffffff; }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-back { background: #333; border: 1px solid #3a3a3a; }
.btn-back:hover:not(:disabled) { background: #3a3a3a; border-color: #00a8ff; color: #00a8ff; }
.btn-outline { background: transparent; color: #00a8ff; border: 1px solid #00a8ff; }
.btn-outline:hover:not(:disabled) { background: rgba(0,168,255,0.1); }
.btn-secondary { background: #333; border: 1px solid #3a3a3a; }
.btn-secondary:hover:not(:disabled) { background: #3a3a3a; border-color: #00a8ff; }
.btn-primary { background: linear-gradient(135deg, #00a8ff 0%, #0097e6 100%); color: white; border: none; font-weight: 600; }
.btn-primary:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,168,255,0.3); }
.save-btn { padding: 8px 16px; font-size: 12px; }
.btn-icon { background: transparent; border: none; color: #aaaaaa; padding: 4px; border-radius: 4px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
.btn-danger:hover { background: rgba(255,107,107,0.1); color: #ff6b6b; }

/* FORM ACTIONS */
.form-actions { padding-top: 16px; border-top: 1px solid #333; }
.enhanced-actions { padding: 16px; background: #2a2a2a; border-radius: 8px; border: 1px solid #333; display: flex; justify-content: space-between; align-items: center; margin-top: 12px; }
.action-left, .action-right { display: flex; gap: 8px; }

/* LOADING */
.spinner-small { width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #ffffff; animation: spin 1s linear infinite; }
.loading-spinner-large { width: 50px; height: 50px; border: 3px solid rgba(0,168,255,0.1); border-radius: 50%; border-top-color: #00a8ff; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.loading-modal { background: #1a1a1a; border: 1px solid #333; padding: 30px; text-align: center; }
.loading-content h3 { color: #ffffff; margin: 16px 0 8px 0; font-size: 16px; }
.loading-content p { color: #aaaaaa; font-size: 12px; }

/* EMPTY STATES */
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px 16px; }
.empty-state.centered { height: 100%; }
.empty-icon { color: #00a8ff; margin-bottom: 16px; opacity: 0.8; }
.empty-state h3 { color: #ffffff; font-size: 16px; margin: 0 0 8px 0; }
.empty-state p { color: #aaaaaa; font-size: 12px; margin: 0 0 20px 0; max-width: 300px; }
.empty-stats { display: flex; gap: 20px; margin-top: 16px; }
.stat { display: flex; flex-direction: column; align-items: center; }
.stat-number { color: #ffffff; font-size: 20px; font-weight: 600; margin-bottom: 2px; }
.stat-label { color: #aaaaaa; font-size: 10px; }

/* RESPONSIVE */
@media (max-width: 768px) {
  .form-layout { flex-direction: column; height: auto; }
  .form-sidebar { width: 100%; border-right: none; border-bottom: 1px solid #333; }
  .enhanced-form { height: auto !important; max-height: 95vh !important; }
  .modal-container { width: 100%; height: 100%; max-height: 100%; border-radius: 0; }
  .modal-header { padding: 16px; flex-direction: column; gap: 12px; }
  .header-left { flex-direction: column; align-items: flex-start; gap: 8px; }
  .header-text h1 { font-size: 18px; }
  .machine-nav-container { order: 1; width: 100%; justify-content: center; margin: 8px 0; }
  .header-actions { flex-direction: column; width: 100%; gap: 8px; }
  .form-main-content { padding: 16px; }
  .shift-header { flex-direction: column; gap: 8px; align-items: flex-start; }
  .totals-container { flex-direction: column; gap: 6px; }
  .total-item { width: 100%; justify-content: space-between; }
  .total-separator { display: none; }
  .machine-card-header { flex-direction: column; gap: 10px; }
  .machine-stats-compact { min-width: 100%; justify-content: space-between; }
  .operator-remarks-line { flex-direction: column; gap: 8px; }
  .form-group-inline { width: 100%; }
  .enhanced-actions { flex-direction: column; gap: 10px; }
  .action-left, .action-right { width: 100%; flex-direction: column; }
  .btn { width: 100%; justify-content: center; }
  .items-table { display: block; overflow-x: auto; }
  .items-table th, .items-table td { font-size: 10px; padding: 4px 2px; }
  .col-add { width: 40px; }
  .col-item { width: 30%; }
  .col-coil-material { width: 25%; }
  .col-qty-eff { width: 20%; }
  .col-actions { width: 35px; }
}

@media (max-width: 480px) {
  .machine-meta { flex-direction: column; gap: 4px; }
  .empty-stats { flex-direction: column; gap: 12px; }
  .alert, .detailed-errors { margin: 0 12px 8px 12px; }
}